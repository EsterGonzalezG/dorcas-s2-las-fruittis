'use strict';
var nameCard= document.querySelector('.fill__input-name');
var nameInput=document.querySelector('.fill__input-job');

function writeData(event) {
  var guiltyElement = event.currentTarget;
  var targetID = guiltyElement.getAttribute('data-info');
  document.querySelector('#' + targetID).innerHTML = guiltyElement.value;
}
nameCard.addEventListener('keyup', writeData);
nameInput.addEventListener('keyup', writeData);

'use strict';

var fr = new FileReader();
var buttonImage = document.querySelector('.fill__input--addimgbutton');
var inputHidden = document.querySelector('#img-selector');
var imageCard = document.querySelector('.viewfinder__photo');
var miniImage = document.querySelector('.fill__input--miniimg');
var urlPhoto;
var miniPhoto;

function getImage(event) {
  var myFile = event.currentTarget.files[0];
  fr.addEventListener('load', writeImage);
  fr.readAsDataURL(myFile);
}

function writeImage() {
  urlPhoto = 'url(' + fr.result + ')';
  miniPhoto = 'url(' + fr.result + ')';
  imageCard.style.backgroundImage = 'url(' + fr.result + ')';
  miniImage.style.backgroundImage = 'url(' + fr.result + ')';
  // guardarCardLocal();
}

function fakeFileClick() {
  inputHidden.click();

}

inputHidden.addEventListener('change', getImage);
buttonImage.addEventListener('click', fakeFileClick);
'use strict';

var i;
var j;
var collapsible=document.querySelectorAll('.collapsible');
var collapsibleTriggers=document.querySelectorAll('.collapsible__label');

function updateCollapsibles(e) {
  var parent = e.currentTarget.parentElement;

  if (parent.classList.contains('collapsible--visible')) {
    parent.classList.remove('collapsible--visible');
  } else {
    closeAllCollapsibles();
    parent.classList.add('collapsible--visible');

  }
}

function closeAllCollapsibles() {
  for (i = 0; i < collapsible.length; i++) {
    collapsible[i].classList.remove('collapsible--visible');
  }
}

for (j = 0; j < collapsibleTriggers.length; j++) {
  collapsibleTriggers[j].addEventListener('click', updateCollapsibles);
}

'use strict';

console.log('>> Ready :)');

'use strict';
const cardContainer = document.querySelector('.viewfinder');
const radioRed = document.querySelector('.radio--red');
const radioGrey = document.querySelector('.radio--grey');
const radios = document.querySelectorAll('.radio');
const radioComic = document.querySelector('.radio--comic');
const radioMontserrat = document.querySelector('.radio--montserrat');
const init = () => {
  for(const element of radios) {
    element.addEventListener('click', setStyles);
  }
};
const setStyles = () => {
  resetColor();
  if (radioRed.checked) {
    cardContainer.classList.add('viewfinder--red');
  } else if (radioGrey.checked) {
    cardContainer.classList.add('viewfinder--grey');
  } else {
    cardContainer.classList.add('viewfinder--blue');
  }
  if (radioComic.checked) {
    cardContainer.classList.add('comic');
  } else if (radioMontserrat.checked) {
    cardContainer.classList.add('montserrat');
  } else {
    cardContainer.classList.add('ubuntu');
  }
};
const resetColor = () => {
  cardContainer.classList.remove('viewfinder--red', 'viewfinder--grey', 'viewfinder--blue', 'comic', 'montserrat', 'ubuntu');
};
init();

// 'use strict';
//
// //localStorage.removeItem('Card');
// var localCard ={
//   palette:'',
//   typography:'',
//   name:'',
//   job:'',
//   email:'',
//   phone:'',
//   linkedin:'',
//   github:'',
//   photo:'',
//   skills:[]
// };
// //var buttonChecked=[];
// var buttonsColors=document.getElementsByName('colors');
// var buttonsText=document.getElementsByName('fonts');
// var imgInput = document.querySelector('#img-selector');
// var fr = new FileReader();
// var nameCard=document.querySelector('#element-name');
// var jobCard=document.querySelector('#element-job');
// var mailInputCard = document.querySelector('.fill__input-mail');
// var phoneInputCard = document.querySelector('.fill__input-phone');
// var linkedinInputCard = document.querySelector('.fill__input-linkedin');
// var githubInputCard = document.querySelector('.fill__input-github');
// var nameInputLocal=document.querySelector('.fill__input-name');
// var jobInputLocal=document.querySelector('.fill__input-job');
//
// var miniImage=document.querySelector('.fill__input--miniimg');
// var emailInputLocal=document.querySelector('.fill__input-mail');
// var telInputLocal=document.querySelector('.fill__input-phone');
// var linkdinInputLocal=document.querySelector('.fill__input-linkedin');
// var githubInputLocal=document.querySelector('.fill__input-github');
// //buttonsColors.addEventListener('change',guardarRadios);
// //buttonsText.addEventListener('change',guardarRadios);
//
// nameInputLocal.addEventListener('keyup',guardarCardLocal);
// jobInputLocal.addEventListener('keyup',guardarCardLocal);
// emailInputLocal.addEventListener('keyup',guardarCardLocal);
// telInputLocal.addEventListener('keyup',guardarCardLocal);
// linkdinInputLocal.addEventListener('keyup',guardarCardLocal);
// githubInputLocal.addEventListener('keyup',guardarCardLocal);
//
// //Faltan por poner las Habilidades y la fotos
//
// function guardarCardLocal() {
//   if (!localStorage.getItem('Card')) {
//     localCard ={
//       palette:'',
//       typography:'',
//       name:'',
//       job:'',
//       email:'',
//       phone:'',
//       linkedin:'',
//       github:'',
//       photo:'',
//       skills:[]
//     };
//   }else{
//     localCard = JSON.parse(localStorage.getItem('Card'));
//   }
//
//   localCard.palette=value;
//   localCard.typography=buttonsText.value;/*ojo que hay que hacer el for para saber el value*/
//   localCard.name = nameInputLocal.value;
//   localCard.job = jobInputLocal.value;
//   localCard.email=emailInputLocal.value;
//   localCard.phone=telInputLocal.value;
//   localCard.linkedin=linkdinInputLocal.value;
//   localCard.github =githubInputLocal.value;
//   localCard.photo = urlPhoto;/*mirar como conseguir la url*/
//   localCard.phonoMini=miniPhoto;
//   localCard.email = emailInputLocal.value;
//   localCard.phone = telInputLocal.value;
//   localCard.linkedin = linkdinInputLocal.value;
//   localCard.github = githubInputLocal.value;
//   localStorage.setItem('Card', JSON.stringify(localCard));
//
// }
// function recuperarLocalCard() {
//   localCard = JSON.parse(localStorage.getItem('Card'));
//   recuperarButton();
//   nameCard.innerHTML=localCard.name;
//   jobCard.innerHTML=localCard.job;
//   nameInputLocal.value = localCard.name;
//   jobInputLocal.value = localCard.job;
//   imageCard.style.backgroundImage =localCard.photo;
//   miniImage.style.backgroundImage=localCard.phonoMini;
//   emailInputLocal.value=localCard.email;
//   mailInputCard.href='mailto:'+localCard.email;
//   emailInputLocal.value = localCard.email;
//   phoneInputCard.href='tel: +34' +localCard.phone;
//   telInputLocal.value = localCard.phone;
//   linkedinInputCard.href='https://www.linkedin.com/in/' +localCard.linkedin;
//   linkdinInputLocal.value = localCard.linkedin;
//   githubInputCard.href='https://github.com/' +localCard.github;
//   githubInputLocal.value = localCard.github;
//
//   //miniBox.style.backgroundImage = localCard.foto;
//   //profileImage.value = localCard.foto;
//
// }
// recuperarLocalCard();
//
// var radiosG = document.querySelectorAll('.radiosGroup');
// var rad = document.querySelectorAll('.radio');
// var value;
// for(var i = 0; i < radiosG.length; i++) {
//   rad[i].addEventListener('change', valorButonRadio);
// }
// function valorButonRadio() {
//
//   //bottonColors=getPaletteValue();
//   //console.log(bottonColors);
//   for(var i = 0; i < rad.length; i++) {
//     if (rad[i].checked) {
//       value = rad[i].value;
//       break;
//     }
//   }
//   guardarCardLocal();
// }
// function recuperarButton() {
//
//   var butonpaleta=parseInt(localCard.palette);
//   if(butonpaleta===1){
//     document.getElementById('blue').click();
//   }else if(butonpaleta===2){
//     document.getElementById('red').click();
//   }else if (butonpaleta===3){
//     document.getElementById('grey').click();
//   }
// }
'use strict';

const buttonReset = document.querySelector('.viewfinder__button-reset');

const resetName = document.getElementById('element-name');
const resetJob = document.getElementById('element-job');
const resetPhoto = document.querySelector('.viewfinder__photo');
const resetMiniPhoto = document.querySelector('.fill__input--miniimg');
const resetColor2 = document.getElementById('viewfinder-id');
const resetFont = document.getElementById('viewfinder-id');
const resetTelefon = document.getElementById('element-phone');
const resetMail = document.getElementById('element-mail');
const resetLinkedin = document.getElementById('element-linkedin');
const resetGithub = document.getElementById('element-linkedin');
const resetAbility = document.querySelectorAll('.skilltext');


const resetForm = () => {
  document.querySelector('.main__form').reset();
  resetCard();
};

const resetCard = () => {
  resetName.innerHTML = 'Nombre Apellido';
  resetJob.innerHTML = 'Front-end developer';
  // las imagenes de la card y la pequeña del formulario
  resetPhoto.style.backgroundImage = 'url("/images/9505e9979cf27646de6a871110cde835.jpg")';
  resetMiniPhoto.style.backgroundImage = 'url("http://placehold.it/29x29/ffffff/ffffff") ';
  //  cambiar los colores
  resetColor2.classList.remove('viewfinder--blue', 'viewfinder--red', 'viewfinder--grey');
  resetColor2.classList.add('viewfinder--blue');
  // cambiar las Fuentes
  resetFont.classList.remove('comic', 'ubuntu', 'montserrat');
  resetFont.classList.add('comic');
  // cambiar iconos
  resetTelefon.href = '';
  resetMail.href = '';
  resetLinkedin.href = '';
  resetGithub.href = '';

  // cambiar Habilidades
  for (const ability of resetAbility) {
    ability.innerHTML = '';
  }
};

buttonReset.addEventListener('click', resetForm);

'use strict';

var mailInput = document.querySelector('.fill__input-mail');
var phoneInput = document.querySelector('.fill__input-phone');
var linkedinInput = document.querySelector('.fill__input-linkedin');
var githubInput = document.querySelector('.fill__input-github');

function transferValueToHref(event) {
  var guiltyElement = event.currentTarget;
  var targetID = guiltyElement.getAttribute('data-donde');
  var fillHref = document.querySelector('#' + targetID);

  if (guiltyElement.classList.contains('fill__input-mail')) {
    fillHref.href = 'mailto:' + guiltyElement.value;
  } else if (guiltyElement.classList.contains('fill__input-phone')){
    fillHref.href = 'tel: +34' + guiltyElement.value;
  } else if (guiltyElement.classList.contains('fill__input-linkedin')) {
    fillHref.href = 'https://www.linkedin.com/in/' + guiltyElement.value;
  } else {
    fillHref.href = 'https://github.com/' + guiltyElement.value;
  }
}

mailInput.addEventListener('keyup', transferValueToHref);
phoneInput.addEventListener('keyup', transferValueToHref);
linkedinInput.addEventListener('keyup', transferValueToHref);
githubInput.addEventListener('keyup', transferValueToHref);

'use strict';

var addAbilityButton = document.querySelector('.abilitiesbutton--plusjs');
var removeAbilityButton = document.querySelectorAll('.abilitiesbutton--minusjs');
var fillAbilityBox = document.querySelectorAll('.fill__ability--js');
var abilitiesDropdown = document.querySelectorAll('.abilitiesdropdown--js');

//Esta función crea los elementos "option" que van dentro del select

function createOptionForSelect(text) {
  var option = document.createElement('option');
  var optionText = document.createTextNode(text);
  option.appendChild(optionText);
  return option;
}

//Esta función llama al API y añade las habilidades a cada option

function callAbilitiesAPI() {
  var url = 'https://raw.githubusercontent.com/Adalab/dorcas-s2-proyecto-data/master/skills.json';
  fetch(url)
    .then(function(response) {
      return response.json();
    })
    .then(function(json) {
      var abilitiesList = json.skills;
      for (var a = 0; a < abilitiesDropdown.length; a++) {
        for (var b = 0; b < abilitiesList.length; b++) {
          var newSkillsOption = createOptionForSelect(abilitiesList[b]);
          abilitiesDropdown[a].appendChild(newSkillsOption);
        }
      }
    });
}

//Esta función hace que se añadan la segunda y tercera caja para seleccionar las skills

function addAbility() {
  var hiddenAbilityBox = document.querySelectorAll('.fill__ability--jshidden');

  if (hiddenAbilityBox.length === 2) {
    fillAbilityBox[1].classList.remove('fill__ability--jshidden');
  } else if (hiddenAbilityBox.length === 1) {
    fillAbilityBox[2].classList.remove('fill__ability--jshidden');
  }
}

//Esta función permite eliminar la segunda y tercera caja de skills

function removeAbility(event) {
  var parentBox = event.currentTarget.parentElement;
  parentBox.classList.add('fill__ability--jshidden');
}

//Las llamadas a las funciones anteriores mediante click

addAbilityButton.addEventListener('click', addAbility);
removeAbilityButton[0].addEventListener('click', removeAbility);
removeAbilityButton[1].addEventListener('click', removeAbility);
callAbilitiesAPI();

//De aquí hacia abajo va la función que hace que el valor seleccionado en los select con skills de "rellena" se transfiera al visor de la card, pero no funciona del todo bien...

function transferabilitiesToCard () {
  var abilitiesFromSelect;
  var abilitiesParagraph = document.querySelectorAll('.skilltext');

  for (var i = 0; i < abilitiesParagraph.length; i++) {
    abilitiesFromSelect = document.createTextNode(abilitiesDropdown[i].value);
    abilitiesParagraph[i].innerHTML = '';
    abilitiesParagraph[i].appendChild(abilitiesFromSelect);
  }
}

for (var i = 0; i < abilitiesDropdown.length; i++) {
  abilitiesDropdown[i].addEventListener('change', transferabilitiesToCard);
}

'use strict';

var photoFileReader = new FileReader();
var buttonCreateCard = document.querySelector('.shares__input--addimgbutton');
var buttonTwitter = document.querySelector('.shares__twitter');
var sharesUrl = document.querySelector('.shares__url');
var loader = document.querySelector('.loader');
var shares = document.querySelector('.shares');
var nameForm = document.querySelector('.fill__input-name');
var jobForm = document.querySelector('.fill__input-job');
var phoneForm = document.querySelector('.fill__input-phone');
var emailForm = document.querySelector('.fill__input-mail');
var linkedinForm = document.querySelector('.fill__input-linkedin');
var githubForm = document.querySelector('.fill__input-github');
var photoForm = document.querySelector('.action__hiddenField');


function createUrlCard () {
  loader.classList.remove('hidden');
  shares.classList.add('hidden');
  fetch('https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json; charset=utf-8'
    },
    body: JSON.stringify({
      palette: getPaletteValue(),
      typography: getTypographyValue(),
      name: nameForm.value,
      job: jobForm.value,
      phone: phoneForm.value,
      email: emailForm.value,
      linkedin: linkedinForm.value,
      github: githubForm.value,
      photo: photoFileReader.result,
      skills: getSkillsValue(),
    })
  })
    .then(function(response){
      return response.json();
    })
    .then(function(data) {
      loader.classList.add('hidden');
      setCardUrl(data.cardURL);
      shareUrlTwitter(data.cardURL);
    });
}

function getPaletteValue() {
  var value;
  var palettes = document.querySelectorAll('input[name="palette"]');
  for(var i = 0; i < palettes.length; i++) {
    if (palettes[i].checked) {
      value = palettes[i].value;
    }
  }
  return parseInt(value);
}

function getTypographyValue() {
  var value;
  var typography = document.querySelectorAll('input[name="typography"]');
  for(var i = 0; i < typography.length; i++) {
    if (typography[i].checked) {
      value = typography[i].value;
    }
  }
  return parseInt(value);
}

function getSkillsValue() {
  var value = [];
  var skills = document.querySelectorAll('.fill__ability--js:not(.fill__ability--jshidden) select');
  for(var i = 0; i < skills.length; i++) {
    value.push(skills[i].value);
  }
  return value;
}

function setCardUrl(url) {
  sharesUrl.innerHTML = url;
  sharesUrl.href = url;
  shares.classList.remove('hidden');
}

function fillPhotoFileReader (event) {
  var myFile = event.currentTarget.files[0];
  photoFileReader.readAsDataURL(myFile);
}

function shareUrlTwitter(url) {
  buttonTwitter.href = 'https://twitter.com/intent/tweet?url=' + url + '&text=Acabo de crear mi tarjeta&hashtags=WomenInTech';
}

photoForm.addEventListener('change', fillPhotoFileReader);
buttonCreateCard.addEventListener('click', createUrlCard);

//# sourceMappingURL=main.min.js.map
